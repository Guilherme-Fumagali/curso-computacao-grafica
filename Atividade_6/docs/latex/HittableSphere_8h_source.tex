\doxysection{Hittable\+Sphere.\+h}
\hypertarget{HittableSphere_8h_source}{}\label{HittableSphere_8h_source}\index{src/headers/hittable/HittableSphere.h@{src/headers/hittable/HittableSphere.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ SPHERE\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ SPHERE\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <utility>}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}vec3.h"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}Hittable.h"{}}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsphere}{sphere}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classhittable}{hittable}}\ \{}
\DoxyCodeLine{00013\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00014\ \ \ \ \ \mbox{\hyperlink{classsphere}{sphere}}(point3\ \_center,\ \textcolor{keywordtype}{double}\ \_radius,\ shared\_ptr<material>\ \_material)}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ \ \ \ \ :\ center(\_center),\ radius(\_radius),\ mat(std::move(\_material))\ \{\};}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsphere_ae829560b28cd8ad4c47be224adc10c3d}{hit}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classray}{ray}}\&\ r,\ \mbox{\hyperlink{classinterval}{interval}}\ ray\_t,\ \mbox{\hyperlink{classhit__record}{hit\_record}}\&\ rec)\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ vec3\ oc\ =\ r.origin()\ -\/\ center;}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ a\ =\ r.direction().length\_squared();}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ half\_b\ =\ dot(oc,\ r.direction());}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ c\ =\ oc.length\_squared()\ -\/\ radius*radius;}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ discriminant\ =\ half\_b*half\_b\ -\/\ a*c;}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (discriminant\ <\ 0)}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Find\ the\ nearest\ root\ that\ lies\ in\ the\ acceptable\ range.}}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ sqrtd\ =\ sqrt(discriminant);}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ root\ =\ (-\/half\_b\ -\/\ sqrtd)\ /\ a;}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!ray\_t.\mbox{\hyperlink{classinterval_a2b78c560ddb82a10ba138471a631cbcc}{surrounds}}(root))\ \{}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ root\ =\ (-\/half\_b\ +\ sqrtd)\ /\ a;}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!ray\_t.\mbox{\hyperlink{classinterval_a2b78c560ddb82a10ba138471a631cbcc}{surrounds}}(root))}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ rec.t\ =\ root;}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ rec.p\ =\ r.at(rec.t);}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ vec3\ outward\_normal\ =\ (rec.p\ -\/\ center)\ /\ radius;}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ rec.set\_face\_normal(r,\ outward\_normal);}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ rec.mat\ =\ mat;}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00051\ \ \ \ \ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00054\ \ \ \ \ point3\ center;}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordtype}{double}\ radius;}
\DoxyCodeLine{00056\ \ \ \ \ shared\_ptr<material>\ mat;}
\DoxyCodeLine{00057\ \};}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
